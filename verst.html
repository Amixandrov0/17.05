<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body link="blue" alink="blue" vlink="blue">
	<h1>Сравнение открытых OLAP-систем Big Data: ClickHouse, Druid и Pinot</h1>
	<p>Оригинал - https://medium.com/@leventov/comparison-of-the-open-source-olap-systems-for-big-data-clickhouse-druid-and-pinot-8e042a5ed1c7</a></p>
	<p><a href="https://clickhouse.com/">ClickHouse</a>, <a href="https://druid.apache.org/">Druid</a> и <a href="https://github.com/apache/pinot">Pinot</a> - три открытых хранилища данных, которые позволяют выполнять аналитические запросы на больших объемах данных с интерактивными задержками. Эта статья - перевод <a href="https://leventov.medium.com/comparison-of-the-open-source-olap-systems-for-big-data-clickhouse-druid-and-pinot-8e042a5ed1c7">подробного сравнения</a>, выполненного Романом Левентовым.</p>
	<h2>Источники информации</h2>
	<p>Подробности реализации <strong>ClickHouse</strong> стали мне известны от <a href="https://github.com/ztlpn">Алексея Зателепина</a>, одного из <strong>ключевых разработчиков проекта</strong>. Доступная на английском документация достаточно скудна – наилучшим источником информации служат последние четыре секции <a href="https://clickhouse.com/docs/en/development/architecture">данной страницы документации</a>.</p>
	<h2>Отличия от Big Data SQL-систем: индексы и статическое распределение данных</h2>
	<p>Рассматриваемые в этой статье системы <strong>выполняют запросы быстрее</strong>, чем системы Big Data из семейства класса SQL-on-Hadoop: Hive, Impala, Presto и Spark, даже когда последние получают доступ к данным, хранящимся в колоночном формате - к примеру, Parquet или Kudu. Это происходит потому, что в ClickHouse, Druid и Pinot:</p>
	<ul>
		<li> Имеется <strong>свой собственный формат для хранения данных с индексами</strong>, и они тесно интегрированы с движками обработки запросов. Системы класса SQL-onHadoop обычно можно назвать агностиками относительно форматов данных и поэтому они менее “навязчивы” в бэкендах Big Data</li>
		<li><strong>Данные распределены относительно “статично”</strong> между узлами, и при распределенном выполнении запроса это можно использовать. Обратная сторона медали при этом в том, что ClickHouse, Druid и Pinot <strong>не поддерживают запросы, которые требуют перемещения большого количества данных</strong> между узлами - к примеру, join между двумя большими таблицами.</li>
	</ul>
	<blockquote><mark>Когда вы выбираете систему OLAP Big Data, не сравнивайте то, насколько они сейчас хорошо подходят для вашего случая. Сейчас они все субоптимальны. Вместо этого, сравните, насколько быстро ваша компания способна заставить двигаться эти системы в том направлении, которое нужно именно вам.</mark></blockquote>
	<h2>Управление данными: сравнение</h2>
	<p>Подход к управлению данными в ClickHouse проще, чем в Druid и Pinot: не требуется “глубокого хранилища”, всего один тип узлов, не требуется выделенного сервера для управления данными. Но подход ClickHouse приводит к некоторым трудностям, когда любая таблица данных вырастает настолько большой, что требуется ее разбиение между десятком или более узлов: коэффициент усиления запроса становится настолько же велик, насколько и фактор секционирования - даже для запросов, которые покрывают небольшой интервал данных:</p>
	<p align="center"><img src="pic.jpg" alt="Data distribution tradeoff in ClickHouse" ></p>
	<p><em>Компромисс распределения данных в ClickHouse</em></p>
	<table border="1" align="center" cellpadding="5px" bordercolor="black">
		<tr>
			<th align="left">ClickHouse</th>
			<th align="left">Druid или Pinot</th>
		</tr>
		<tr>
			<td>В организации есть эксперты по C++</td>
			<td>В организации есть эксперты по Java</td>
		</tr>
		<tr>
			<td>Малый кластер</td>
			<td>Большой кластер</td>
		</tr>
		<tr>
			<td>Немного таблиц</td>
			<td>Много таблиц</td>
		</tr>
		<tr>
			<td>Один набор данных</td>
			<td>Несколько несвязанных наборов данных</td>
		</tr>
	</table>
</body>
</html>